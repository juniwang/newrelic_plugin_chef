#
#
# This is a template newrelic_plugin.yml file. Please move this file
# to the following location if it is not already there:
#
#     ./config/newrelic_plugin.yml
#
# Where the current directory is the directory where your main program resides and is your current
# directory when you run the main program.
#
# Please make sure to update the license_key information with the license key for your New Relic
# account.
#
#
newrelic:
  #
  # Update with your New Relic account license key:
  #
  license_key: '<%= node[:newrelic][:plugin][:license] %>'
  #
  # Set to '1' for verbose output, remove for normal output.
  # All output goes to stdout/stderr.
  #
  verbose: 0
#
# Agent Configuration:
#
agents:
  # example
  #my_logfile_1:
    ## Full path to the the log file
    # log_path: tmp.log
    ## Returns the number of matches for this term. Use Linux Regex formatting.
    ## Default: "[Ee]rror"
    # term: "[Ee]rror   "
    ## Provide any options to pass to grep when running.
    ## For example, to count non-matching lines, enter 'v'.
    ## Use the abbreviated format ('v' and not 'invert-match').
    # grep_options:
<% if node[:newrelic][:logwatcher] && node[:newrelic][:logwatcher][:metrics] then 
    node[:newrelic][:logwatcher][:metrics].each do |name, mtcs| %>
  
  # metrics for <%= name %>
  <%= name %>:
    log_path: <%= mtcs[:log_path] %>
    term: "<%= mtcs[:term] %>"
    grep_options: <%= mtcs[:grep_options] %>
  <% end 
  end %>